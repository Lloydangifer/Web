<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="stylesheet" href="../../_local/phptech.css">

<title>Cr&eacute;e une variable PHP &agrave; partir d'une valeur
	lin&eacute;aris&eacute;e</title>

</head>
<body>
	<div class="manualnavbar">
		<div class="prev">
			<a href="function.strval.html">strval</a>
		</div>
		<div class="next">
			<a href="function.unset.html">unset</a>
		</div>
		<div class="up">
			<a href="ref.var.html">Fonctions de gestion des variables</a>
		</div>
		<div class="home" onclick="location.href='../accueil.html'"></div>
	</div>
	<hr />
	<div id="function.unserialize" class="refentry">
		<div class="refnamediv">
			<h1 class="refname">unserialize</h1>
			<p class="verinfo">(PHP 4, PHP 5)</p>
			<p class="refpurpose">
				<span class="refname">unserialize</span> <span class="mdash">&mdash;</span>
				<span class="dc-title">Crée une variable PHP à partir
					d&#039;une valeur linéarisée</span>
			</p>

		</div>

		<div class="refsect1 description"
			id="refsect1-function.unserialize-description">
			<h3 class="title">Description</h3>
			<div class="methodsynopsis dc-description">
				<span class="type"><a
					href="language.pseudo-types.html#language.types.mixed"
					class="type mixed">mixed</a></span> <span class="methodname"><strong>unserialize</strong></span>
				( <span class="methodparam"><span class="type">string</span>
					<code class="parameter">$str</code></span> )
			</div>

			<p class="simpara">
				<span class="function"><strong>unserialize()</strong></span> prend
				une variable linéarisée (voir <span class="function"><a
					href="function.serialize.html" class="function">serialize()</a></span>) et
				la convertit en variable PHP.
			</p>
		</div>


		<div class="refsect1 parameters"
			id="refsect1-function.unserialize-parameters">
			<h3 class="title">Liste de paramètres</h3>
			<p class="para">
			<dl>

				<dt>

					<span class="term"><em><code class="parameter">str</code></em></span>
				<dd>

					<p class="para">La chaîne linéarisée.</p>
					<p class="para">
						Si la variable délinéarisée est un objet, après avoir réussi à le
						reconstruire, PHP appellera automatiquement la méthode <a
							href="language.oop5.magic.html#object.wakeup" class="link">__wakeup</a>
						si elle existe.
					</p>
					<p class="para">
					<blockquote class="note">
						<p>
							<strong class="note">Note</strong>: <strong>unserialize_callback_func
								directive</strong><br />
						<p class="para">
							Il est possible de définir une fonction de rappel qui sera
							appelée si une classe indéfinie est utilisée lors de la
							délinéarisation (ce qui évitera de voir l&#039;objet recevoir le
							type d&#039;objet incomplet <span class="type"><a
								href="language.types.object.html" class="type object">object</a></span>
							&quot;<em>__PHP_Incomplete_Class</em>&quot;). Utilisez dans votre
							fichier
							<var class="filename">php.ini</var>
							ou le fichier
							<var class="filename">.htaccess</var>
							, ou encore avec la fonction <span class="function"><a
								href="function.ini-set.html" class="function">ini_set()</a></span>,
							pour définir une fonction <em>unserialize_callback_func()</em>.
							Chaque fois qu&#039;une classe non-définie sera instanciée, cette
							fonction sera appelée. Pour désactiver cette fonctionnalité,
							laissez la simplement vide.
					</blockquote>
					</p>
				</dd>

				</dt>

			</dl>

			</p>
		</div>


		<div class="refsect1 returnvalues"
			id="refsect1-function.unserialize-returnvalues">
			<h3 class="title">Valeurs de retour</h3>
			<p class="para">
				La valeur convertie est retournée par la fonction, et peut être de
				type <a href="language.types.boolean.html" class="link">booléen</a>,
				<a href="language.types.integer.html" class="link">entier</a>, <a
					href="language.types.float.html" class="link">nombre décimal</a>, <a
					href="language.types.string.html" class="link">chaîne de
					caractères</a>, <a href="language.types.array.html" class="link">tableau</a>
				ou <a href="language.types.object.html" class="link">objet</a>.
			</p>
			<p class="para">
				Si la chaîne passée ne peut être délinéarisée, cette fonction
				retourne <strong><code>FALSE</code></strong> et une erreur <strong><code>E_NOTICE</code></strong>
				est émise.
			</p>
		</div>


		<div class="refsect1 changelog"
			id="refsect1-function.unserialize-changelog">
			<h3 class="title">Historique</h3>
			<p class="para">
			<table class="doctable informaltable">

				<thead>
					<tr>
						<th>Version</th>
						<th>Description</th>
					</tr>

				</thead>

				<tbody class="tbody">
					<tr>
						<td>4.2.0</td>
						<td>La directive unserialize_callback_func devient
							disponible.</td>
					</tr>

				</tbody>

			</table>

			</p>
		</div>


		<div class="refsect1 examples"
			id="refsect1-function.unserialize-examples">
			<h3 class="title">Exemples</h3>
			<p class="para">
			<div class="example" id="example-4925">
				<p>
					<strong>Exemple #1 Exemple avec <span class="function"><strong>unserialize()</strong></span></strong>
				</p>
				<div class="example-contents">
					<div class="phpcode">
						<code>
							<span style="color: #000000"> <span style="color: #0000BB">&lt;?php<br /></span><span
								style="color: #FF8000">//&nbsp;Ici,&nbsp;on&nbsp;utilise&nbsp;&lt;function&gt;unserialize&lt;/function&gt;&nbsp;pour&nbsp;charger&nbsp;les&nbsp;données&nbsp;de&nbsp;sessions<br />//&nbsp;depuis&nbsp;la&nbsp;base&nbsp;de&nbsp;données,&nbsp;dans&nbsp;$session_data.&nbsp;Cet&nbsp;exemple&nbsp;complète<br />//&nbsp;celui&nbsp;fourni&nbsp;avec&nbsp;&lt;function&gt;serialize&lt;/function&gt;.<br />
								<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span
								style="color: #007700">=&nbsp;</span><span
								style="color: #0000BB">odbc_connect</span><span
								style="color: #007700">(</span><span style="color: #DD0000">"webdb"</span><span
								style="color: #007700">,&nbsp;</span><span
								style="color: #DD0000">"php"</span><span style="color: #007700">,&nbsp;</span><span
								style="color: #DD0000">"chicken"</span><span
								style="color: #007700">);<br /></span><span
								style="color: #0000BB">$stmt&nbsp;</span><span
								style="color: #007700">=&nbsp;</span><span
								style="color: #0000BB">odbc_prepare</span><span
								style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span
								style="color: #007700">,&nbsp;</span><span
								style="color: #DD0000">"SELECT&nbsp;data&nbsp;FROM&nbsp;sessions&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;?"</span><span
								style="color: #007700">);<br /></span><span
								style="color: #0000BB">$sqldata&nbsp;</span><span
								style="color: #007700">=&nbsp;array(</span><span
								style="color: #0000BB">$_SERVER</span><span
								style="color: #007700">[</span><span style="color: #DD0000">'PHP_AUTH_USER'</span><span
								style="color: #007700">]);<br />if&nbsp;(!
							</span><span style="color: #0000BB">odbc_execute</span><span
								style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span
								style="color: #007700">,&nbsp;</span><span
								style="color: #0000BB">$sqldata</span><span
								style="color: #007700">)&nbsp;||&nbsp;!</span><span
								style="color: #0000BB">odbc_fetch_into</span><span
								style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span
								style="color: #007700">,&nbsp;</span><span
								style="color: #0000BB">$tmp</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;
							</span><span style="color: #FF8000">//&nbsp;si&nbsp;la&nbsp;préparation&nbsp;ou&nbsp;la&nbsp;lecture&nbsp;échouent,&nbsp;on&nbsp;crée&nbsp;un&nbsp;tableau&nbsp;vide<br />&nbsp;&nbsp;&nbsp;&nbsp;
							</span><span style="color: #0000BB">$session_data&nbsp;</span><span
								style="color: #007700">=&nbsp;array();<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;
							</span><span style="color: #FF8000">//&nbsp;les&nbsp;données&nbsp;sauvées&nbsp;sont&nbsp;dans&nbsp;$tmp[0].<br />&nbsp;&nbsp;&nbsp;&nbsp;
							</span><span style="color: #0000BB">$session_data&nbsp;</span><span
								style="color: #007700">=&nbsp;</span><span
								style="color: #0000BB">unserialize</span><span
								style="color: #007700">(</span><span style="color: #0000BB">$tmp</span><span
								style="color: #007700">[</span><span style="color: #0000BB">0</span><span
								style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!
							</span><span style="color: #0000BB">is_array</span><span
								style="color: #007700">(</span><span style="color: #0000BB">$session_data</span><span
								style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							</span><span style="color: #FF8000">//&nbsp;Erreur...&nbsp;initialisation&nbsp;d'un&nbsp;tableau&nbsp;vide<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							</span><span style="color: #0000BB">$session_data&nbsp;</span><span
								style="color: #007700">=&nbsp;array();<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span
								style="color: #0000BB">?&gt;</span>
							</span>
						</code>
					</div>
				</div>

			</div>
			</p>
			<p class="para">
			<div class="example" id="example-4926">
				<p>
					<strong>Exemple #2 Exemple avec la directive <strong
						class="option unknown">unserialize_callback_func</strong>
					</strong>
				</p>
				<div class="example-contents">
					<div class="phpcode">
						<code>
							<span style="color: #000000"> <span style="color: #0000BB">&lt;?php<br />$serialized_object
							</span><span style="color: #007700">=</span><span style="color: #DD0000">'O:1:"a":1:{s:5:"value";s:3:"100";}'</span><span
								style="color: #007700">;<br />
								<br /></span><span style="color: #FF8000">//&nbsp;directive&nbsp;unserialize_callback_func&nbsp;disponible&nbsp;depuis&nbsp;PHP&nbsp;4.2.0<br /></span><span
								style="color: #0000BB">ini_set</span><span
								style="color: #007700">(</span><span style="color: #DD0000">'unserialize_callback_func'</span><span
								style="color: #007700">,&nbsp;</span><span
								style="color: #DD0000">'mycallback'</span><span
								style="color: #007700">);<br />
								<br />function&nbsp;
							</span><span style="color: #0000BB">mycallback</span><span
								style="color: #007700">(</span><span style="color: #0000BB">$classname</span><span
								style="color: #007700">)&nbsp;<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;
							</span><span style="color: #FF8000">//&nbsp;Incluez&nbsp;simplement&nbsp;un&nbsp;fichier&nbsp;contenant&nbsp;votre&nbsp;définition&nbsp;de&nbsp;classe<br />&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vous&nbsp;saurez&nbsp;quelle&nbsp;classe&nbsp;grâce&nbsp;à&nbsp;$classname<br /></span><span
								style="color: #007700">}<br /></span><span
								style="color: #0000BB">?&gt;</span>
							</span>
						</code>
					</div>
				</div>

			</div>
			</p>
		</div>


		<div class="refsect1 notes" id="refsect1-function.unserialize-notes">
			<h3 class="title">Notes</h3>
			<div class="warning">
				<strong class="warning">Avertissement</strong>
				<p class="para">
					<strong><code>FALSE</code></strong> est retourné dans les cas où
					une erreur survient et si vous tentez de délinéariser une valeur
					linéarisé égale à <strong><code>FALSE</code></strong>. Il est
					possible d&#039;intercepter ce cas spécial en comparant <em><code
							class="parameter">str</code></em> avec <em>serialize(false)</em> ou en
					attrapant l&#039;erreur <strong><code>E_NOTICE</code></strong>
					émise.
				</p>
			</div>
		</div>


		<div class="refsect1 seealso"
			id="refsect1-function.unserialize-seealso">
			<h3 class="title">Voir aussi</h3>
			<p class="para">
			<ul class="simplelist">
				<li class="member"><span class="function"><a
						href="function.serialize.html" class="function" rel="rdfs-seeAlso">serialize()</a>
						- Lin&eacute;arise une variable</span></li>
				<li class="member"><a href="language.oop5.autoload.html"
					class="link">Auto-chargement d&#039;objets</a></li>
				<li class="member"><a
					href="var.configuration.html#unserialize-callback-func"
					class="link">unserialize_callback_func</a></li>
				<li class="member"><a
					href="language.oop5.magic.html#object.wakeup" class="link">__wakeup</a></li>
			</ul>
			</p>
		</div>


	</div>
	<hr /><div class="manualnavbarbas">
		<div class="prev">
			<a href="function.strval.html">strval</a>
		</div>
		<div class="next">
			<a href="function.unset.html">unset</a>
		</div>
		<div class="up">
			<a href="ref.var.html">Fonctions de gestion des variables</a>
		</div>
		<div class="home" onclick="location.href='../accueil.html'"></div>
	</div>
</body>
</html>
